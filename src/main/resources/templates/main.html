<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Train Reservation</title>
  <link rel="stylesheet" href="/css/abc.css">
  <link rel="stylesheet" href="/css/main_style.css"> <!-- KTX ìŠ¤íƒ€ì¼ í¬í•¨ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
</head>
<body>
<!-- Header Section -->
<header class="navbar">
  <div class="navbar-container">
    <div class="logo">
      <img src="/img/logo.png" alt="Let's AYU Logo">
      <span>Let's AYU</span>
    </div>
    <nav class="menu">
      <ul>
        <li>
          <a class="welcome-message" th:text="${session.role == 'admin'} ? 'ê´€ë¦¬ì '+${session.loginName}+'ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.' : ${session.loginName} + 'ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤.'"></a>
        </li>
        <li><a href="/tickets">ìŠ¹ì°¨ê¶Œ</a></li>
        <li><a href="/tourtrains">ê´€ê´‘ì—´ì°¨</a></li>
        <li><a href="/free_travel">ììœ ì—¬í–‰</a></li>
        <li><a href="/travel_products">ì—¬í–‰ìƒí’ˆ</a></li>
        <li>
          <a href="/sogong/train/logout">ë¡œê·¸ì•„ì›ƒ</a>
        </li>
        <li th:if="${session.role == 'admin'}">
          <a href="/sogong/train/admin" class="admin-button">ê´€ë¦¬ì í˜ì´ì§€</a>
        </li>
      </ul>
    </nav>
  </div>
</header>

<!-- KTX Search Section -->
<header class="header">
  <div class="header-content">
    <h1 class="title">KTX ê¸°ì°¨í‘œ</h1>
    <form th:action="@{/search}" method="post" class="search-box">
      <div class="tabs">
        <label><input type="radio" name="region" value="êµ­ë‚´" checked> êµ­ë‚´</label>
      </div>
      <div class="fields">
        <!-- ì¶œë°œì§€ í•„ë“œ -->
        <div class="field dropdown">
          <label>ì¶œë°œì§€</label>
          <input type="text" id="departure" name="departure" value="ì„œìš¸" readonly onclick="toggleDropdown('departure-dropdown')">
          <div id="departure-dropdown" class="dropdown-menu">
            <div class="dropdown-header">ëŒ€í•œë¯¼êµ­</div>
            <ul>
              <li onclick="selectCity('departure', 'ì„œìš¸')">ì„œìš¸</li>
              <li onclick="selectCity('departure', 'ìˆ˜ì›')">ìˆ˜ì›</li>
              <li onclick="selectCity('departure', 'í‰íƒ')">í‰íƒ</li>
              <li onclick="selectCity('departure', 'ëŒ€ì „')">ëŒ€ì „</li>
              <li onclick="selectCity('departure', 'ë™ëŒ€êµ¬')">ë™ëŒ€êµ¬</li>
              <li onclick="selectCity('departure', 'ë¶€ì‚°')">ë¶€ì‚°</li>
            </ul>
          </div>
        </div>

        <!-- êµí™˜ ë²„íŠ¼ -->
        <div class="swap-button-container">
          <button type="button" class="swap-button" onclick="swapLocations()">ğŸš…</button>
        </div>

        <!-- ë„ì°©ì§€ í•„ë“œ -->
        <div class="field dropdown">
          <label>ë„ì°©ì§€</label>
          <input type="text" id="arrival" name="arrival" value="ì²œì•ˆì•„ì‚°" readonly onclick="toggleDropdown('arrival-dropdown')">
          <div id="arrival-dropdown" class="dropdown-menu">
            <div class="dropdown-header">ëŒ€í•œë¯¼êµ­</div>
            <ul>
              <li onclick="selectCity('arrival', 'ì„œìš¸')">ì„œìš¸</li>
              <li onclick="selectCity('arrival', 'ìˆ˜ì›')">ìˆ˜ì›</li>
              <li onclick="selectCity('arrival', 'í‰íƒ')">í‰íƒ</li>
              <li onclick="selectCity('arrival', 'ëŒ€ì „')">ëŒ€ì „</li>
              <li onclick="selectCity('arrival', 'ë™ëŒ€êµ¬')">ë™ëŒ€êµ¬</li>
              <li onclick="selectCity('arrival', 'ë¶€ì‚°')">ë¶€ì‚°</li>
            </ul>
          </div>
        </div>

        <!-- ì¶œë°œ ì‹œê°„ í•„ë“œ -->
        <div class="field">
          <label>ì¶œë°œ ì‹œê°„</label>
          <input type="text" id="departure-time" name="departureTime" readonly>
        </div>

        <!-- ìŠ¹ê° ìˆ˜ í•„ë“œ -->
        <div class="field">
          <label>ìŠ¹ê°</label>
          <div class="passenger-control">
            <button type="button" id="passenger-decrease" class="passenger-btn">-</button>
            <input type="number" id="passenger" name="passengerCount" value="1">
            <button type="button" id="passenger-increase" class="passenger-btn">+</button>
          </div>
        </div>
      </div>


      <button type="submit" class="search-btn">ê²€ìƒ‰í•˜ê¸°ğŸ”</button>
    </form>
  </div>
</header>

<!-- Main Section -->
<main>
  <section class="search-section">
    <h2>Book Your Train Tickets</h2>
    <form th:action="@{/search}" method="get">
      <!-- ì¶”ê°€ ê²€ìƒ‰ í¼ ì…ë ¥ -->
    </form>
  </section>
</main>

<!-- Footer -->
<footer>
  <p>&copy; 2024 Train Reservation. All Rights Reserved.</p>
</footer>




<!-- ë“œë¡­ë‹¤ìš´ê³¼ departure time ì‚¬ìš© ìŠ¤í¬ë¦½íŠ¸ -->
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
<!-- JavaScript -->
<script>
  // ë“œë¡­ë‹¤ìš´ ë©”ë‰´ í† ê¸€
  function toggleDropdown(dropdownId) {
    const dropdown = document.getElementById(dropdownId);
    dropdown.classList.toggle('active');
  }

  // ë„ì‹œ ì„ íƒ ì‹œ ê°’ ë³€ê²½
  function selectCity(inputId, city) {
    const input = document.getElementById(inputId);
    input.value = city;

    // ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
    const dropdown = document.getElementById(inputId + '-dropdown');
    dropdown.classList.remove('active');
  }

  // í˜ì´ì§€ ì™¸ë¶€ í´ë¦­ ì‹œ ë“œë¡­ë‹¤ìš´ ë‹«ê¸°
  document.addEventListener('click', (event) => {
    const dropdowns = document.querySelectorAll('.dropdown-menu');
    dropdowns.forEach((dropdown) => {
      if (!dropdown.contains(event.target) && !dropdown.previousElementSibling.contains(event.target)) {
        dropdown.classList.remove('active');
      }
    });
  });
  function swapLocations() {
    const departureInput = document.getElementById('departure');
    const arrivalInput = document.getElementById('arrival');

    // ì¶œë°œì§€ì™€ ë„ì°©ì§€ ê°’ êµí™˜
    const temp = departureInput.value;
    departureInput.value = arrivalInput.value;
    arrivalInput.value = temp;
  }
  flatpickr("#departure-time", {
    enableTime: false, // ì‹œê°„ ì„ íƒ ë¶ˆê°€ëŠ¥
    dateFormat: "Y-m-d", // ë‚ ì§œ ë° ì‹œê°„ í˜•ì‹
    minDate: "today", // ì˜¤ëŠ˜ ì´í›„ ë‚ ì§œë§Œ ì„ íƒ ê°€ëŠ¥
    defaultDate: new Date(), // ê¸°ë³¸ ê°’ì„ ì˜¤ëŠ˜ë¡œ ì„¤ì •
    locale: "ko" // í•œêµ­ì–´ ì„¤ì •
  });

  // ìŠ¹ê° ìˆ˜ ì¡°ì •
  document.getElementById('passenger-decrease').addEventListener('click', () => {
    const passengerInput = document.getElementById('passenger');
    let passengerCount = parseInt(passengerInput.value, 10);

    if (passengerCount > 1) { // ìµœì†Œ 1ëª… ì´ìƒ
      passengerCount -= 1;
      passengerInput.value = passengerCount;
    }
  });

  document.getElementById('passenger-increase').addEventListener('click', () => {
    const passengerInput = document.getElementById('passenger');
    let passengerCount = parseInt(passengerInput.value, 10);

    if (passengerCount < 10) { // ìµœëŒ€ 10ëª…ê¹Œì§€ ì œí•œ
      passengerCount += 1;
      passengerInput.value = passengerCount;
    }
  });

</script>
</body>
</html>
